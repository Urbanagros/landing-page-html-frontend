"use strict";(self.webpackChunkUrbanAgros=self.webpackChunkUrbanAgros||[]).push([[518],{4518:(N,f,r)=>{r.r(f),r.d(f,{AddLandModule:()=>S});var v=r(6895),s=r(107),a=r(433),u=r(8505),m=r(262),A=r(515);class L{constructor(){this.id=0,this.name="",this.address="",this.city="",this.state="",this.number="",this.zipcode=""}}var e=r(8256),Z=r(529),C=r(9646);const g={headers:new Z.WM({"Content-Type":"application/json"})};let U=(()=>{class n{constructor(o){this.http=o,this.BASE_URL="http://localhost:3000/"}addLand(o){return console.log(o),this.http.post(this.BASE_URL+"api/v1/land",o,g)}editLand(o){return this.http.put(this.BASE_URL+"api/v1/land"+o.id,o,g)}getLands(){return this.http.get(this.BASE_URL+"api/v1/land").pipe((0,u.b)(t=>console.log("Get Land From API")),(0,m.K)(this.handleError("getLands",[])))}deleteLand(o){const t="number"==typeof o?o:o.id;return this.http.delete(this.BASE_URL+"api/v1/land"+t,g).pipe((0,u.b)(i=>console.log(`deleted land id=${t}`)),(0,m.K)(this.handleError("deleteLand")))}handleError(o="operation",t){return d=>(console.error(d),console.log(`${o} failed: ${d.message}`),(0,C.of)(t))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(Z.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function b(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"Loading"),e.qZA())}function y(n,l){if(1&n&&(e.TgZ(0,"div",15),e.YNc(1,b,2,0,"span",8),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.isLoadingResults)}}function T(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"Please enter Name"),e.qZA())}function _(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"Please Endere\xe7o"),e.qZA())}function x(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"Please enter City"),e.qZA())}function F(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"Please enter Estate"),e.qZA())}function I(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"Please CEP"),e.qZA())}const E=[{path:"",component:(()=>{class n{constructor(o,t,d,i){this.service=o,this.routeAct=t,this.router=d,this.formBuilder=i,this.land=new L,this.landForm=this.formBuilder.group({name:[this.land.name,a.kI.required],address:[this.land.address,a.kI.required],city:[this.land.city,a.kI.required],state:[this.land.state,a.kI.required],zipcode:[this.land.zipcode,a.kI.required]}),this.isLoadingResults=!1,this.id=t.snapshot.params.id,this.title="Add"}ngOnInit(){this.id?(this.title="Edit",localStorage.getItem("land")&&(this.land=JSON.parse(localStorage.getItem("land")||"{}"))):this.landForm=this.formBuilder.group({name:[null,a.kI.required],address:[null,a.kI.required],city:[null,a.kI.required],state:[null,a.kI.required],zipcode:[null,a.kI.required]})}submitUserForm(o){if(this.isLoadingResults=!0,this.land=this.landForm.value,this.id){let t={name:this.land.name,address:this.land.address,number:this.land.number,city:this.land.city,user_id:1};this.land.id=this.id,this.service.editLand(t).pipe((0,u.b)(d=>console.log("User Add")),(0,m.K)(()=>(alert("Ocorreu um erro"),A.E))).subscribe({next:d=>{console.log("entrou no response"),console.log(d),this.router.navigate(["animals"])},error:d=>{console.log("entrou no erro"),alert("Usu\xe1rio ou Senha inv\xe1lido(s)!"),console.log(d)}})}else this.service.addLand({name:this.land.name,address:this.land.address,number:this.land.number,city:this.land.city,user_id:1}).pipe((0,u.b)(d=>console.log("User Add")),(0,m.K)(()=>(alert("Ocorreu um erro"),A.E))).subscribe({next:d=>{console.log("entrou no response"),console.log(d),this.router.navigate(["animals"])},error:d=>{console.log("entrou no erro"),alert("Usu\xe1rio ou Senha inv\xe1lido(s)!"),console.log(d)}})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(U),e.Y36(s.gz),e.Y36(s.F0),e.Y36(a.QS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-addland"]],decls:41,vars:8,consts:[[1,"example-container"],["class","example-loading-shade",4,"ngIf"],[1,"main-div"],[1,"example-card"],[3,"formGroup","ngSubmit"],[1,"mb-3","mt-3"],["for","text",1,"form-label"],["type","text","id","email","placeholder","Name","formControlName","name",1,"form-control"],[4,"ngIf"],["placeholder","Address","formControlName","address",1,"form-control"],["placeholder","City","formControlName","city",1,"form-control"],["placeholder","Estate","formControlName","state",1,"form-control"],["placeholder","Zip","formControlName","zipcode",1,"form-control"],[1,"button-row"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"example-loading-shade"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0),e.YNc(1,y,2,1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div")(5,"div"),e._uU(6,"Adicionar terreno"),e.qZA()(),e.TgZ(7,"form",4),e.NdJ("ngSubmit",function(){return t.submitUserForm(t.landForm.value)}),e.TgZ(8,"div",5)(9,"label",6),e._uU(10,"Name:"),e.qZA(),e._UZ(11,"input",7),e.TgZ(12,"div"),e.YNc(13,T,2,0,"span",8),e.qZA()(),e.TgZ(14,"div",5)(15,"label",6),e._uU(16,"Endere\xe7o:"),e.qZA(),e._UZ(17,"input",9),e.TgZ(18,"div"),e.YNc(19,_,2,0,"span",8),e.qZA()(),e.TgZ(20,"div",5)(21,"label",6),e._uU(22,"City:"),e.qZA(),e._UZ(23,"input",10),e.TgZ(24,"div"),e.YNc(25,x,2,0,"span",8),e.qZA()(),e.TgZ(26,"div",5)(27,"label",6),e._uU(28,"Estado:"),e.qZA(),e._UZ(29,"input",11),e.TgZ(30,"div"),e.YNc(31,F,2,0,"span",8),e.qZA()(),e.TgZ(32,"div",5)(33,"label",6),e._uU(34,"CEP:"),e.qZA(),e._UZ(35,"input",12),e.TgZ(36,"div"),e.YNc(37,I,2,0,"span",8),e.qZA()(),e.TgZ(38,"div",13)(39,"button",14),e._uU(40," save "),e.qZA()()()()()()),2&o){let d,i,p,c,h;e.xp6(1),e.Q6J("ngIf",t.isLoadingResults),e.xp6(6),e.Q6J("formGroup",t.landForm),e.xp6(6),e.Q6J("ngIf",!(null!=(d=t.landForm.get("name"))&&d.valid)&&(null==(d=t.landForm.get("name"))?null:d.touched)),e.xp6(6),e.Q6J("ngIf",!(null!=(i=t.landForm.get("address"))&&i.valid)&&(null==(i=t.landForm.get("address"))?null:i.touched)),e.xp6(6),e.Q6J("ngIf",!(null!=(p=t.landForm.get("city"))&&p.valid)&&(null==(p=t.landForm.get("city"))?null:p.touched)),e.xp6(6),e.Q6J("ngIf",!(null!=(c=t.landForm.get("state"))&&c.valid)&&(null==(c=t.landForm.get("state"))?null:c.touched)),e.xp6(6),e.Q6J("ngIf",!(null!=(h=t.landForm.get("zipcode"))&&h.valid)&&(null==(h=t.landForm.get("zipcode"))?null:h.touched)),e.xp6(2),e.Q6J("disabled",!t.landForm.valid)}},dependencies:[v.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".example-card[_ngcontent-%COMP%]{width:500px}.example-container[_ngcontent-%COMP%]{position:relative;padding:3px;background:#f2f2f2}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:60%}.example-full-width[_ngcontent-%COMP%]{width:100%}.example-full-width[_ngcontent-%COMP%]:nth-last-child{margin-bottom:10px}.button-row[_ngcontent-%COMP%]{margin:10px 0}.mat-flat-button[_ngcontent-%COMP%]{margin:5px}.center[_ngcontent-%COMP%]{width:75%;margin:2px auto}.main-div[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:center;align-items:center}"]}),n})()}];let q=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[s.Bz.forChild(E),s.Bz]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[v.ez,q,a.u5,a.UX]}),n})()}}]);